ALTER SESSION SET "_ORACLE_SCRIPT" = TRUE;
CREATE USER movie IDENTIFIED BY movie;
GRANT CONNECT , RESOURCE, DBA TO movie;

CREATE TABLE GENERO(
    id_genero INTEGER NOT NULL,
    descripcion VARCHAR2(50) NOT NULL,
    CONSTRAINT GENERO_PK PRIMARY KEY(id_genero)
);

CREATE TABLE MOVIE(
    id_movie INTEGER NOT NULL,
    titulo VARCHAR2(100) NOT NULL,
    director VARCHAR2(100) NOT NULL,
    anio INTEGER NOT NULL,
    duracion INTEGER NOT NULL,
    id_genero INTEGER NOT NULL,
    CONSTRAINT MOVIE_PK PRIMARY KEY(id_movie),
    CONSTRAINT MOVIE_GENERO_FK FOREIGN KEY(id_genero) REFERENCES GENERO(id_genero)
);


CREATE TABLE TIPO_USUARIO(
    id_tipo_usuario INTEGER NOT NULL,
    descripcion VARCHAR2(50) NOT NULL,
    CONSTRAINT TIPO_USUARIO_PK PRIMARY KEY(id_tipo_usuario)
);

CREATE TABLE USUARIO(
    id_usuario INTEGER NOT NULL,
    nombre VARCHAR2(20) NOT NULL,
    pass VARCHAR2(20) NOT NULL,
    id_tipo_usuario INTEGER NOT NULL,
    CONSTRAINT USUARIO_PK PRIMARY KEY(id_usuario),
    CONSTRAINT USUARIO_TIPO_USUARIO_FK FOREIGN KEY(id_tipo_usuario) REFERENCES TIPO_USUARIO(id_tipo_usuario)
);

CREATE SEQUENCE seq_pelicula
START WITH 1
INCREMENT BY 1;

CREATE SEQUENCE seq_usuario
START WITH 1
INCREMENT BY 1;

ALTER TABLE movie 
MODIFY id_movie DEFAULT seq_pelicula.nextval;

ALTER TABLE usuario
MODIFY id_usuario DEFAULT seq_usuario.nextval;


INSERT INTO GENERO VALUES (1,'Terror');
INSERT INTO GENERO VALUES (2,'Drama');
INSERT INTO GENERO VALUES (3,'Ficcion');

INSERT INTO TIPO_USUARIO VALUES (1,'Admin');
INSERT INTO TIPO_USUARIO VALUES (2,'User');

INSERT INTO USUARIO VALUES(1,'admin','admin123',1);
INSERT INTO USUARIO VALUES(2,'user','user123',2);

commit;